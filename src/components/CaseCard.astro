---
const {
  title,
  subtitle,
  cover,
  link,
  impact = [],
  badge,
} = Astro.props;
---
---
const { title, subtitle, cover, link, summary = "", metrics = [] } = Astro.props;
---

<div class="rounded-3xl border border-gray-200 bg-white p-6 md:p-8 shadow-sm">
  <!-- Заголовок -->
  <h3 class="case-title">{title}</h3>

  <!-- Описание + метрики -->
  <div class="mt-6 grid gap-6 md:grid-cols-[1fr,auto] items-start">
    <!-- Левая колонка: абзацы -->
    <div class="text-[20px] leading-[1.6] text-gray-800">
      {summary.split('\n\n').map((p) => <p class="mt-4 first:mt-0">{p}</p>)}
    </div>

    <!-- Правая колонка: метрики -->
    {metrics.length > 0 && (
      <div class="flex gap-5">
        {metrics.map((m) => (
          <div class="min-w-[240px] rounded-[24px] bg-gray-100 px-6 py-7 shadow-sm">
            <div class="text-[44px] leading-none text-gray-900">{m.value}</div>
            <div class="mt-3 text-[17px] leading-[1.4] text-gray-600">{m.label}</div>
          </div>
        ))}
      </div>
    )}
  </div>

  <!-- Картинка ниже блока текста/метрик -->
  {cover && (
    <div class="mt-8 rounded-2xl bg-gray-100 overflow-hidden">
      <img src={cover} alt={title} class="w-full aspect-[16/9] object-cover" loading="lazy" />
    </div>
  )}

  {link && (
    <div class="mt-6">
      <a href={link} target={link.startsWith('http') ? '_blank' : '_self'}
         class="inline-flex items-center gap-2 text-sm text-blue-600 underline underline-offset-4 hover:text-blue-500">
        Открыть подробнее →
      </a>
    </div>
  )}
</div>
