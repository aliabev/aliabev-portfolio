---
const {
  title,
  subtitle,
  cover,
  link,
  summary = "",
  metrics = [],
  impact = [],
  badge,
} = Astro.props;
---

<div class="rounded-3xl border border-gray-200 bg-white p-6 md:p-8 shadow-sm">
  <!-- Заголовок -->
  <h3 class="case-title">{title}</h3>

  <!-- Описание + метрики -->
<div class="mt-6 grid gap-8 md:grid-cols-[600px,auto] items-start">
  <!-- Левая колонка: абзацы -->
  <div class="text-[19px] leading-[1.6] text-gray-800 font-[Aeroport]">
    {summary && summary.split('\n\n').map((p) => <p class="mt-4 first:mt-0">{p}</p>)}
    {!summary && subtitle && <p class="mt-4">{subtitle}</p>}
  </div>

  <!-- Правая колонка: метрики (всегда горизонтально) -->
  {metrics?.length > 0 && (
    <div class="flex flex-nowrap gap-5 overflow-x-auto pb-2 md:pb-0 -mx-1 px-1">
      {metrics.map((m) => (
        <div
          class="rounded-[24px] bg-gray-100 px-6 py-7 shadow-sm shrink-0"
          style={`width:${typeof m.width === 'number' ? `${m.width}px` : (m.width || '260px')};`}
        >
          <div class="text-[50px] leading-none text-gray-900 font-[Aeroport]">{m.value}</div>
          <div class="mt-3 text-[18px] leading-[1.4] text-gray-600 font-[Aeroport]">{m.label}</div>

        </div>
      ))}
    </div>
  )}
</div>


  <!-- Картинка ниже блока текста/метрик -->
  {cover && (
    <div class="mt-8 rounded-2xl bg-gray-100 overflow-hidden">
      <img src={cover} alt={title} class="w-full aspect-[16/9] object-cover" loading="lazy" />
    </div>
  )}

  <!-- Внутренняя ссылка (если есть) -->
  {link && (
    <div class="mt-6">
      <a
        href={link}
        target={link.startsWith('http') ? '_blank' : '_self'}
        class="inline-flex items-center gap-2 text-sm text-blue-600 underline underline-offset-4 hover:text-blue-500"
      >
        Открыть подробнее →
      </a>
    </div>
  )}
</div>
