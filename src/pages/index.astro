---
import '../styles/global.css';
import Base from '../layouts/Base.astro';
import HeroIntro from '../components/HeroIntro.astro';
import CaseCard from '../components/CaseCard.astro';

const modules = import.meta.glob('../content/cases/*.mdx', { eager: true });
const cases = Object.entries(modules).map(([path, mod]) => {
  const fm = mod.frontmatter || {};
  const slug = path.split('/').pop().replace('.mdx', '');
  return { slug, ...fm };
}).sort((a, b) => (b.priority ?? 0) - (a.priority ?? 0));
---
<Base title="Портфолио — Дмитрий Алябьев">
  <!-- Плашка-герой -->
  <HeroIntro
    title="Дима Алябьев"
    description="Более 15 лет улучшаю дизайн в продуктовых командах финтеха и классифайда в роли: product designer, art-director, team-lead, product manager. С накопленным T-shape опытом выстраиваю кросс-функциональные процессы, интегрирую дизайн в продуктовую стратегию с фокусом на рост target-метрик. Развиваю дизайн-команды, но и не боюсь работы руками."
    cvHref="/cv.pdf"
    tgHref="https://t.me/alyabev"
    imageSrc="/assets/hero.jpg"
  />

  <!-- Заголовок блока кейсов можно скрыть, если не нужен -->
  <section class="mt-10 space-y-3">
    <h2 class="text-2xl md:text-3xl font-semibold">Кейсы</h2>
    <p class="text-gray-600">Подборка продуктовых проектов с метриками влияния.</p>
  </section>

  <section class="mt-6 space-y-6">
    {cases.map((c) => (<CaseCard {...c} slug={c.slug} />))}
  </section>
</Base>
