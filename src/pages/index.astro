---
import '../styles/global.css';
import Base from '../layouts/Base.astro';
import CaseCard from '../components/CaseCard.astro';

const modules = import.meta.glob('../content/cases/*.mdx', { eager: true });
const cases = Object.entries(modules).map(([path, mod]) => {
  const fm = mod.frontmatter || {};
  const slug = path.split('/').pop().replace('.mdx', '');
  return { slug, ...fm };
}).sort((a, b) => (b.priority ?? 0) - (a.priority ?? 0));

const title = "Кейсы";
const subtitle = "Подборка продуктовых проектов с метриками влияния.";
---
<Base title="Портфолио — Дмитрий Алябьев">
  <section class="mb-10 space-y-3">
    <h1>{title}</h1>
    <p class="lead">{subtitle}</p>
  </section>

  <!-- крупные карточки, 1 в ряд на десктопе — как в примере -->
  <section class="space-y-6">
    {cases.map((c) => (
      <CaseCard {...c} slug={c.slug} />
    ))}
  </section>
</Base>
